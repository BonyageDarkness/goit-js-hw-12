{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '44822574-4b43621c9303530917b2f490d';\nconst apiUrl = `https://pixabay.com/api/?key=${apiKey}&image_type=photo&orientation=horizontal&safesearch=true`;\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(apiUrl, {\n      params: {\n        q: query,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function displayImages(images, isLoadMore = false) {\n  const gallery = document.querySelector('.gallery');\n  if (!isLoadMore) {\n    gallery.innerHTML = ''; // Clear previous images\n  }\n\n  if (images.length === 0) {\n    iziToast.info({\n      title: 'Info',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  images.forEach(image => {\n    const galleryItem = document.createElement('div');\n    galleryItem.className = 'gallery-item';\n\n    const link = document.createElement('a');\n    link.href = image.largeImageURL;\n    link.setAttribute('data-lightbox', 'gallery');\n    link.setAttribute('target', '_blank'); // Открытие изображения в новом окне\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n\n    link.appendChild(img);\n    galleryItem.appendChild(link);\n\n    const infoStatsContainer = document.createElement('div');\n    infoStatsContainer.className = 'info-stats-container';\n\n    const infoLabels = ['Likes', 'Views', 'Comments', 'Downloads'];\n    const infoValues = [\n      image.likes,\n      image.views,\n      image.comments,\n      image.downloads,\n    ];\n\n    infoLabels.forEach((label, index) => {\n      const infoBlock = document.createElement('div');\n      infoBlock.className = 'info-block';\n\n      const info = document.createElement('div');\n      info.className = 'info';\n      info.textContent = label;\n\n      const stats = document.createElement('div');\n      stats.className = 'stats';\n      stats.textContent = infoValues[index];\n\n      infoBlock.appendChild(info);\n      infoBlock.appendChild(stats);\n      infoStatsContainer.appendChild(infoBlock);\n    });\n\n    galleryItem.appendChild(infoStatsContainer);\n    fragment.appendChild(galleryItem);\n  });\n\n  gallery.appendChild(fragment);\n  document.getElementById('gallery').classList.remove('hidden');\n\n  // Refresh SimpleLightbox\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n\n  // Smooth scroll\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { displayImages } from './js/render-functions.js';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const searchButton = document.getElementById('search-button');\n  const loadMoreButton = document.getElementById('load-more-button');\n  const loadingIndicator = document.getElementById('loading');\n\n  const showLoader = () => {\n    console.log('Showing loader');\n    loadingIndicator.style.display = 'block';\n  };\n\n  const hideLoader = () => {\n    console.log('Hiding loader');\n    loadingIndicator.style.display = 'none';\n  };\n\n  searchButton.addEventListener('click', async () => {\n    const searchInput = document.getElementById('search-input').value.trim();\n\n    if (searchInput === '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Search input cannot be empty',\n      });\n      return;\n    }\n\n    currentQuery = searchInput;\n    currentPage = 1;\n\n    showLoader();\n    document.getElementById('gallery').classList.add('hidden');\n    document.querySelector('.gallery').innerHTML = '';\n    loadMoreButton.classList.add('hidden');\n\n    try {\n      //Для проверки работоспособности анимации загрузки установил 0.5 секунд\n      await new Promise(resolve => setTimeout(resolve, 500));\n\n      const data = await fetchImages(currentQuery, currentPage);\n      hideLoader();\n\n      displayImages(data.hits);\n      if (data.hits.length > 0 && currentPage * 15 < data.totalHits) {\n        loadMoreButton.classList.remove('hidden');\n      } else {\n        loadMoreButton.classList.add('hidden');\n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    } catch (error) {\n      hideLoader();\n      console.error('Fetch error:', error);\n      iziToast.error({\n        title: 'Error',\n        message: 'Failed to fetch images. Please try again later.',\n      });\n    }\n  });\n\n  loadMoreButton.addEventListener('click', async () => {\n    currentPage += 1;\n    showLoader();\n    loadMoreButton.classList.add('hidden'); // Скрываем кнопку перед загрузкой\n\n    try {\n      const data = await fetchImages(currentQuery, currentPage);\n      hideLoader();\n\n      displayImages(data.hits, true);\n      if (currentPage * 15 < data.totalHits) {\n        loadMoreButton.classList.remove('hidden');\n      } else {\n        loadMoreButton.classList.add('hidden');\n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    } catch (error) {\n      hideLoader();\n      console.error('Fetch error:', error);\n      iziToast.error({\n        title: 'Error',\n        message: 'Failed to fetch images. Please try again later.',\n      });\n    }\n  });\n});\n"],"names":["apiKey","apiUrl","fetchImages","query","page","perPage","axios","error","displayImages","images","isLoadMore","gallery","fragment","image","galleryItem","link","img","infoStatsContainer","infoLabels","infoValues","label","index","infoBlock","info","stats","SimpleLightbox","cardHeight","currentPage","currentQuery","searchButton","loadMoreButton","loadingIndicator","showLoader","hideLoader","searchInput","iziToast","resolve","data"],"mappings":"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"}